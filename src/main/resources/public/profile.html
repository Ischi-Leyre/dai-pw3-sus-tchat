<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Profile - JitSUSmon</title>
  <script src="js/api_ui.js"></script>
</head>
<body>
<h1>Profile</h1>

<button onclick="getProfile('profileOutput')">Load Profile</button>
<pre id="profileOutput"></pre>

<h2>Edit Profile</h2>
<form id="editProfileForm">
  <input name="username" placeholder="New Username">
  <input name="email" placeholder="New Email">
  <input name="password" type="password" placeholder="New Password">
  <button type="submit">Update</button>
</form>

<script>
  document.getElementById('editProfileForm').onsubmit = async e => {
    e.preventDefault();
    const form = e.target;
    const data = {};
    if(form.username.value) data.username = form.username.value;
    if(form.email.value) data.email = form.email.value;
    if(form.password.value) data.password = form.password.value;
    await editUser('profileOutput', data); // editUser récupère l'ID via cookie
  };
</script>
</body>
</html>